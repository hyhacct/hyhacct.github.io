{"title":"在Github使用PAT方式跨仓库部署","uid":"ac4f53f75d4e475cf1b29cd6d8ebee29","slug":"2025-07-18-01","date":"2025-07-18T10:38:36.000Z","updated":"2025-07-18T03:38:27.778Z","comments":true,"path":"api/articles/2025-07-18-01.json","keywords":null,"cover":null,"content":"<p>如果想直接用 <code>Github Actions</code> 的工作流自动化部署构建 Hexo 项目的话,需要编写 <code>workflows</code> 配置</p>\n<h2 id=\"创建-Token\"><a href=\"#创建-Token\" class=\"headerlink\" title=\"创建 Token\"></a>创建 Token</h2><p>首先去创建一个 Token</p>\n<ol>\n<li>访问 [<a href=\"https://github.com/settings/tokens]\">https://github.com/settings/tokens]</a></li>\n<li>点击 “Fine-grained token”</li>\n<li>选择权限 repo （将这几个启用：<code>contents</code>、<code>actions</code>、<code>deployments</code>）</li>\n<li>有效期 随便多久都行,主要看你,我直接永久</li>\n</ol>\n<p>然后他会生成一个 Token,这个 Token 只显示一次,一定要先记下</p>\n<h2 id=\"配置-Secrets\"><a href=\"#配置-Secrets\" class=\"headerlink\" title=\"配置 Secrets\"></a>配置 Secrets</h2><p>接下来进入你的构建目标仓库,依次选择: <code>Settings &gt; Secrets and variables &gt; Actions</code></p>\n<p>添加一个 secret,比如我这里变量名字叫 <code>BLOG_TOKEN</code>,然后值就是上面生成的 Token,填进去保存即可</p>\n<h2 id=\"配置-workflows\"><a href=\"#配置-workflows\" class=\"headerlink\" title=\"配置 workflows\"></a>配置 workflows</h2><p>接着改改你的构建流程,把刚才创建的 <code>BLOG_TOKEN</code> 变量引用进去</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Deploy</span> <span class=\"string\">Hexo</span> <span class=\"string\">to</span> <span class=\"string\">GitHub</span> <span class=\"string\">Pages</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">main</span> <span class=\"comment\"># 或者是 master，根据你的默认分支修改</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">build-and-deploy:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">source</span> <span class=\"string\">code</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v4</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Set</span> <span class=\"string\">up</span> <span class=\"string\">Node.js</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v4</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&quot;18&quot;</span> <span class=\"comment\"># 根据你的项目需要修改 Node 版本</span></span><br><span class=\"line\">          <span class=\"attr\">cache:</span> <span class=\"string\">&quot;npm&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          npm install -g hexo-cli</span></span><br><span class=\"line\"><span class=\"string\">          npm install</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Clean</span> <span class=\"string\">and</span> <span class=\"string\">generate</span> <span class=\"string\">Hexo</span> <span class=\"string\">site</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          hexo generate</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span> <span class=\"string\">to</span> <span class=\"string\">GitHub</span> <span class=\"string\">Pages</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v4</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.BLOG_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br></pre></td></tr></table></figure>\n","feature":true,"text":"如果想直接用 Github Actions 的工作流自动化部署构建 Hexo 项目的话,需要编写 workflows 配置 创建 Token首先去创建一个 To...","permalink":"/post/2025-07-18-01","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"GitHub","slug":"GitHub","count":2,"path":"api/tags/GitHub.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA-Token\"><span class=\"toc-text\">创建 Token</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-Secrets\"><span class=\"toc-text\">配置 Secrets</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-workflows\"><span class=\"toc-text\">配置 workflows</span></a></li></ol>","author":{"name":"Reverse","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2025/07/17/9182254090efe94c.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Hexo发布到GitHubPage报错404","uid":"8a5374f6cc33ebcdaaad4a3c993161aa","slug":"2025-07-18-02","date":"2025-07-18T10:55:25.000Z","updated":"2025-07-18T03:38:27.778Z","comments":true,"path":"api/articles/2025-07-18-02.json","keywords":null,"cover":null,"text":"Number 1检查静态资源是否已经存在,访问地址: https://github.com/<你的用户名>/<你的仓库>/tree/gh-pages Numbe...","permalink":"/post/2025-07-18-02","photos":[],"count_time":{"symbolsCount":210,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"GitHub","slug":"GitHub","count":2,"path":"api/tags/GitHub.json"}],"author":{"name":"Reverse","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2025/07/17/9182254090efe94c.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Article Title","uid":"a6b82868af4785482b869dc5d958966b","slug":"hello-world","date":"2020-08-15T18:49:36.000Z","updated":"2025-07-18T03:38:27.778Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":null,"text":"这是一个博客 TIP hello [hello] 文本内容 ","permalink":"/post/hello-world","photos":[],"count_time":{"symbolsCount":45,"symbolsTime":"1 mins."},"categories":[{"name":"Cate","slug":"Cate","count":1,"path":"api/categories/Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":1,"path":"api/tags/Tag.json"}],"author":{"name":"Reverse","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2025/07/17/9182254090efe94c.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}