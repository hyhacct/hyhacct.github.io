{"title":"强制更新Gorm零值","uid":"87e97009ba513578bced279cc7705d0d","slug":"2025-07-18-11","date":"2025-07-18T14:59:24.000Z","updated":"2025-07-24T09:54:27.101Z","comments":true,"path":"api/articles/2025-07-18-11.json","keywords":null,"cover":"/images/cover/gorm_1.svg","content":"<h2 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h2><p>在使用 Gorm 的<code>Updates</code>方法更新字段时，一般情况下他会忽略掉零值，例如 <code>false</code>、<code>0</code>、<code>&quot;&quot;</code>，这些都属于零值</p>\n<p>如果你有个字段叫<code>status</code>，类型为<code>bool</code>表示该记录的状态，那么当你想修改他为<code>false</code>时是不会成功的。</p>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><div class=\"custom-quote danger\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M19.76 5.23C15.84 5.23 12 2 12 2C12 2 8.15996 5.23 4.23996 5.23C4.23996 5.23 1.86996 16.99 12 22C22.13 16.99 19.76 5.23 19.76 5.23Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 16H12\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">注意</p>\n<p>小心使用哦,别改崩了</p>\n</div>\n<p>GORM 默认忽略零值（如 false），直接通过<code>Select</code>方法指定强制更新字段，即便你这个字段将被修改为零值。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(TablePass)</span></span> AddOrUpdate(config TablePass) <span class=\"type\">error</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> farmework.ModuleOrm.Where(<span class=\"string\">&quot;id = ?&quot;</span>, config.ID).</span><br><span class=\"line\">        Assign(config).Select(<span class=\"string\">&quot;status&quot;</span>).FirstOrCreate(&amp;config).Error</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","text":"概述在使用 Gorm 的Updates方法更新字段时，一般情况下他会忽略掉零值，例如 false、0、\"\"，这些都属于零值 如果你有个字段叫status，类型为...","permalink":"/post/2025-07-18-11","photos":[],"count_time":{"symbolsCount":430,"symbolsTime":"1 mins."},"categories":[{"name":"Go","slug":"Go","count":3,"path":"api/categories/Go.json"}],"tags":[{"name":"Go Gorm","slug":"Go-Gorm","count":1,"path":"api/tags/Go-Gorm.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">概述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">解决方法</span></a></li></ol>","author":{"name":"Reverse","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"每一次的突破，都是自我超越的见证。","socials":{"github":"https://github.com/hyhacct","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Wails中Go结构或方法无法映射到前端","uid":"e7e13627a554d1367d86ca0e77896cef","slug":"2025-07-18-12","date":"2025-07-18T15:04:34.000Z","updated":"2025-07-24T09:54:27.101Z","comments":true,"path":"api/articles/2025-07-18-12.json","keywords":null,"cover":null,"text":"概述最近发现一个奇怪的问题，我执行wails dev时突然发现我在app.go中暴露给前端的函数居然没能自动绑定到前端的wailsjs/go/apps/xxx下...","permalink":"/post/2025-07-18-12","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"Go","slug":"Go","count":3,"path":"api/categories/Go.json"}],"tags":[{"name":"Go Wails","slug":"Go-Wails","count":1,"path":"api/tags/Go-Wails.json"}],"author":{"name":"Reverse","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"每一次的突破，都是自我超越的见证。","socials":{"github":"https://github.com/hyhacct","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Vue脚手架模板","uid":"f51d2d839d5d520af441020c6868a0d3","slug":"2025-07-18-10","date":"2025-07-18T14:40:25.000Z","updated":"2025-07-24T09:54:27.101Z","comments":true,"path":"api/articles/2025-07-18-10.json","keywords":null,"cover":null,"text":" 有啥用? 浅浅记录一下在使用 Vue 的轮子时,各个支持库的模板,方便在新起项目时可以快速 CV 上去 :) Router Template 这是路由组件的 ...","permalink":"/post/2025-07-18-10","photos":[],"count_time":{"symbolsCount":"6.2k","symbolsTime":"6 mins."},"categories":[{"name":"Vue.js","slug":"Vue-js","count":5,"path":"api/categories/Vue-js.json"}],"tags":[{"name":"Vue.js","slug":"Vue-js","count":2,"path":"api/tags/Vue-js.json"}],"author":{"name":"Reverse","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"每一次的突破，都是自我超越的见证。","socials":{"github":"https://github.com/hyhacct","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}